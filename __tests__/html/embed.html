<html>

<head>
    <!-- Usermaven tracking one-liner. By default, pageview event is sent -->
    <script src="%%SERVER%%/s/lib.js" data-key="Test" data-log-level="debug" defer></script>
    <script>
        setTimeout(() => {
            console.log("Testing delayed tracking");
            let usermaven = window.usermaven = window.usermaven || (function () { (window.usermavenQ = window.usermavenQ || []).push(arguments); })

            usermaven('id', {
                // Required attributes
                id: '61caea525265a849dd7c2722',    // Unique ID for the user in database.
                email: "zaryab.shahbaz@d4interactive.io", // Email address for the user.

                // Recommended attributes
                created_at: "2021-01-20",   // DateTime string in your system that represents when
                // the user first signed up.
                first_name: 'Muhammad',       // Add any attributes you'd like to use in the email subject or body.
                last_name: 'Shahbaz',       // First name and last name are shown on people pages.

                // Example attributes (you can name attributes what you wish)
                custom: {
                    current_plan: "replug-agency-lifetime",
                    subscription_id: "5afa74ea9bca157d4121b1d4"
                },
                // Company Attributes
                company: {
                    // Required Attributes
                    id: "61caea525265a849dd7c2722", // Company ID
                    name: "Muhammad Zaryaab Shahbaz", // Company Name.
                    created_at: "2021-01-20",   // DateTime string in your system that represents when

                    // Optional attributes such as industry, website, employee count etc.
                    custom: {
                        industry: "Technology", // Company Industry.
                        website: "https://usermaven.com", // Company Website.
                        employees: 20, // Number of employees.
                        plan: "enterprise", // Company Plan.
                    }
                }
            })

            usermaven('set', { persistent_prop1: 2 })
            usermaven('set', { persistent_prop2: 3 }, { eventType: "additional_event" })
            usermaven('set', { persistent_prop3: 3 }, { eventType: "non_existing_event" })

            usermaven('track', 'additional_event', { extra: 1 });

            /* setTimeout(() => {
                console.log("Testing unset event");
                usermaven('unset');
            }, 2000); */
        }, 500)

    </script>
</head>

<body>
    <h1>Testing %%SERVER%%</h1>
    <h2>Capabilities</h2>
    <ul>
        <li><a href="autocapture.html">Auto-capturing</a></li>
    </ul>
    <h3>Track custom events</h3>
    <button id="button-test" name="button-test" onclick="usermaven('track', 'button_test', {
        'price': 400
    })">Simple button</button>

</body>

</html>